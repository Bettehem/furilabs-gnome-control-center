From: Robert Ancell <robert.ancell@canonical.com>
Date: Mon, 3 Feb 2020 14:23:34 +1300
Subject: info-overview: Show updates in update-manager instead of GNOME
 Software

---
 panels/system/about/cc-about-page.c | 16 +++++++++++-----
 1 file changed, 11 insertions(+), 5 deletions(-)

diff --git a/panels/system/about/cc-about-page.c b/panels/system/about/cc-about-page.c
index 84dcf66..933709d 100644
--- a/panels/system/about/cc-about-page.c
+++ b/panels/system/about/cc-about-page.c
@@ -100,6 +100,13 @@ does_gnome_software_allow_updates (void)
   return g_settings_get_boolean (settings, "allow-updates");
 }
 
+static gboolean
+does_update_manager_exist (void)
+{
+  g_autofree gchar *path = g_find_program_in_path ("update-manager");
+  return path != NULL;
+}
+
 static gboolean
 does_gnome_software_exist (void)
 {
@@ -147,11 +154,10 @@ cc_about_page_open_software_update (CcAboutPage *self)
   gboolean ret;
   char *argv[3];
 
-  if (does_gnome_software_exist ())
+  if (does_update_manager_exist ())
     {
-      argv[0] = "gnome-software";
-      argv[1] = "--mode=updates";
-      argv[2] = NULL;
+      argv[0] = "update-manager";
+      argv[1] = NULL;
     }
   else
     {
@@ -264,7 +270,7 @@ cc_about_page_init (CcAboutPage *self)
 
   gtk_widget_init_template (GTK_WIDGET (self));
 
-  if ((!does_gnome_software_exist () || !does_gnome_software_allow_updates ()) && !does_gpk_update_viewer_exist ())
+  if (!does_update_manager_exist () && (!does_gnome_software_exist () || !does_gnome_software_allow_updates ()) && !does_gpk_update_viewer_exist ())
     gtk_widget_set_visible (GTK_WIDGET (self->software_updates_group), FALSE);
 
   about_page_setup_overview (self);
